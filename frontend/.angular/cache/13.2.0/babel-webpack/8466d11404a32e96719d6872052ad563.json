{"ast":null,"code":"import _asyncToGenerator from \"/root/smc/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//import { ImageCroppedEvent, LoadedImage } from 'ngx-image-cropper'; //testing\nimport { ImageCropperComponent } from 'ngx-image-cropper'; //testing\n\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/user.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"ngx-image-cropper\";\nconst _c0 = [\"updateUser\"];\nconst _c1 = [\"avatarUpload\"];\nexport class UpdateUserComponent {\n  constructor(el, userService, http, router) {\n    this.el = el;\n    this.userService = userService;\n    this.http = http;\n    this.router = router;\n    this.fileName = \"\";\n    this.updateUser = false;\n    this.avatarUpdated = false;\n    this.showSpinner = false; //testing\n\n    this.imageChangedEvent = '';\n    this.croppedImage = '';\n  }\n\n  imageLoaded() {\n    console.log(\"image loaded\");\n  }\n\n  cropperReady() {\n    console.log(\"cropper ready\");\n  }\n\n  loadImageFailed() {\n    console.log(\"loadImageFailed\");\n  }\n\n  fileChangeEvent(event) {\n    this.imageChangedEvent = event;\n  }\n\n  imageCropped(event) {\n    this.croppedImage = event.base64; //console.log(this.croppedImage.substring(22,this.croppedImage.length));\n\n    const byteCharacters = atob(this.croppedImage.substring(22, this.croppedImage.length));\n    const byteNumbers = new Array(byteCharacters.length);\n\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n\n    const byteArray = new Uint8Array(byteNumbers);\n    this.croppedAvatarBlob = new Blob([byteArray], {\n      type: 'image/png'\n    });\n  } //testing\n\n\n  ngOnInit() {\n    this.updateUserDiv = this.el.nativeElement.querySelector(\"#updateUser\");\n    this.uploadAvatarInput = this.el.nativeElement.querySelector(\"#avatarUpload\");\n    let userId = localStorage.getItem(\"userId\");\n\n    if (userId) {\n      this.getUser(userId);\n    }\n\n    this.tempAvatar = `assets/avatars/${userId}/avatar.png`;\n  }\n\n  onSubmit(f) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(\"f submit running\");\n      yield _this.uploadFile().then(() => {\n        console.log(\"after uploadFile then in onSubmit\");\n\n        if (f.value.displayName != \"\" || _this.avatarUpdated) {\n          if (f.value.displayName != \"\") {\n            _this.user.displayName = f.value.displayName;\n          }\n\n          _this.userService.updateUser(_this.user).subscribe(user => {\n            console.log(\"user updated, hideUpdateUser\");\n            _this.user = user;\n\n            _this.hideUpdateUser();\n\n            if (_this.avatarUpdated) {\n              _this.avatarUpdated = false;\n              let tmpData = {\n                \"newAvatarLoc\": _this.tempAvatarFName,\n                \"_id\": _this.user._id\n              };\n\n              _this.http.post(\"https://smokingmonkey.club:3978/updateAvatar\", tmpData).subscribe(res => console.log(res), err => console.log(err));\n            }\n\n            console.log(\"reload\");\n            window.location.reload();\n          }); //trap error\n\n        }\n      });\n    })();\n  }\n\n  hideUpdateUser() {\n    //this.showSpinner=false;\n    this.tempAvatar = `assets/avatars/${this.user._id}/avatar.png`;\n    this.updateUserDiv.classList.remove(\"w3-show\");\n    this.updateUserDiv.classList.add(\"w3-hide\");\n  }\n  /*\n  const myAsynFunction = async (url: string): Promise<T> => {\n      const { data } = await fetch(url)\n      return data\n  }\n  */\n\n\n  uploadAvatar() {\n    //console.log(\"clicked\");\n    //this.showSpinner=true;\n    //console.log(\"showing spinner\");\n    this.uploadAvatarInput.click();\n  }\n\n  getUser(id) {\n    this.userService.getUser(id).subscribe(user => {\n      this.user = user;\n      console.log(\"got user \", this.user);\n    });\n  }\n\n  uploadFile() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let formData = new FormData();\n      formData.append('avatarUpload', _this2.croppedAvatarBlob, \"upload.png\");\n\n      _this2.http.post(\"https://smokingmonkey.club:3978/uploadFile\", formData).subscribe(res => {\n        console.log(\"new avatar uploaded \", res);\n        _this2.tempAvatar = `assets/avatars/${res.loc}/`;\n        _this2.avatarUpdated = true;\n        _this2.tempAvatarFName = res.loc;\n        /*\n        setTimeout(() => {\n               //console.log(\"hiding spinner\");\n          //this.showSpinner=false;\n        }, 1000);\n        */\n      }, err => console.log(err));\n    })();\n  }\n\n}\n\nUpdateUserComponent.ɵfac = function UpdateUserComponent_Factory(t) {\n  return new (t || UpdateUserComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nUpdateUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UpdateUserComponent,\n  selectors: [[\"app-update-user\"]],\n  viewQuery: function UpdateUserComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(ImageCropperComponent, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.div = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imageCropper = _t.first);\n    }\n  },\n  inputs: {\n    updateUser: \"updateUser\"\n  },\n  decls: 21,\n  vars: 7,\n  consts: [[\"id\", \"updateUser\", 1, \"w3-modal\"], [1, \"w3-col\", \"l4\", \"m8\", \"w3-container\", \"w3-display-topmiddle\"], [1, \"w3-container\", \"w3-card-4\", \"w3-light-grey\", \"w3-text-blue\", \"w3-margin\", \"w3-round-large\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"w3-btn\", \"w3-right\", 2, \"padding-top\", \"3px\", \"padding-bottom\", \"3px\", \"padding-left\", \"8px\", \"padding-right\", \"0px\", 3, \"click\"], [1, \"w3-row\", \"w3-section\"], [1, \"w3-rest\", \"w3-center\"], [1, \"w3-container\", \"w3-display-container\", \"w3-text-white\"], [\"format\", \"png\", 3, \"imageChangedEvent\", \"maintainAspectRatio\", \"aspectRatio\", \"resizeToWidth\", \"imageURL\", \"hidden\", \"imageCropped\", \"imageLoaded\", \"cropperReady\", \"loadImageFailed\"], [\"type\", \"file\", \"id\", \"avatarUpload\", \"name\", \"avatarUpload\", 2, \"display\", \"none\", 3, \"change\"], [\"onmouseover\", \"\", 1, \"w3-container\", \"w3-text-theme\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"w3-row\", \"w3-section\", \"w3-padding\"], [1, \"w3-col\", 2, \"width\", \"50px\"], [1, \"w3-xxlarge\", \"fa\", \"fa-user\", \"w3-text-theme\"], [1, \"w3-rest\"], [\"name\", \"displayName\", \"type\", \"text\", \"ngModel\", \"\", 1, \"w3-input\", \"w3-border\", 3, \"placeholder\"], [\"type\", \"submit\", 1, \"w3-button\", \"w3-block\", \"w3-section\", \"w3-button\", \"w3-theme\", \"w3-ripple\", \"w3-padding\"]],\n  template: function UpdateUserComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r1 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function UpdateUserComponent_Template_form_ngSubmit_2_listener() {\n        i0.ɵɵrestoreView(_r1);\n\n        const _r0 = i0.ɵɵreference(3);\n\n        return ctx.onSubmit(_r0);\n      });\n      i0.ɵɵelementStart(4, \"span\", 4);\n      i0.ɵɵlistener(\"click\", function UpdateUserComponent_Template_span_click_4_listener() {\n        return ctx.hideUpdateUser();\n      });\n      i0.ɵɵtext(5, \"\\u2716\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"image-cropper\", 8);\n      i0.ɵɵlistener(\"imageCropped\", function UpdateUserComponent_Template_image_cropper_imageCropped_9_listener($event) {\n        return ctx.imageCropped($event);\n      })(\"imageLoaded\", function UpdateUserComponent_Template_image_cropper_imageLoaded_9_listener() {\n        return ctx.imageLoaded();\n      })(\"cropperReady\", function UpdateUserComponent_Template_image_cropper_cropperReady_9_listener() {\n        return ctx.cropperReady();\n      })(\"loadImageFailed\", function UpdateUserComponent_Template_image_cropper_loadImageFailed_9_listener() {\n        return ctx.loadImageFailed();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 9);\n      i0.ɵɵlistener(\"change\", function UpdateUserComponent_Template_input_change_10_listener($event) {\n        return ctx.fileChangeEvent($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 5);\n      i0.ɵɵelementStart(12, \"div\", 10);\n      i0.ɵɵlistener(\"click\", function UpdateUserComponent_Template_div_click_12_listener() {\n        return ctx.uploadAvatar();\n      });\n      i0.ɵɵtext(13, \"Click to change\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 11);\n      i0.ɵɵelementStart(15, \"div\", 12);\n      i0.ɵɵelement(16, \"i\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 14);\n      i0.ɵɵelement(18, \"input\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 16);\n      i0.ɵɵtext(20, \"Update Profile\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"imageChangedEvent\", ctx.imageChangedEvent)(\"maintainAspectRatio\", true)(\"aspectRatio\", 1 / 1)(\"resizeToWidth\", 128)(\"imageURL\", ctx.tempAvatar)(\"hidden\", true);\n      i0.ɵɵadvance(9);\n      i0.ɵɵpropertyInterpolate1(\"placeholder\", \"\", ctx.user && ctx.user.displayName, \" (display name)\");\n    }\n  },\n  directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.ImageCropperComponent, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGRhdGUtdXNlci5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["/root/smc/frontend/src/app/pages/update-user/update-user.component.ts"],"names":["ImageCropperComponent","i0","i1","i2","i3","i4","i5","_c0","_c1","UpdateUserComponent","constructor","el","userService","http","router","fileName","updateUser","avatarUpdated","showSpinner","imageChangedEvent","croppedImage","imageLoaded","console","log","cropperReady","loadImageFailed","fileChangeEvent","event","imageCropped","base64","byteCharacters","atob","substring","length","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","croppedAvatarBlob","Blob","type","ngOnInit","updateUserDiv","nativeElement","querySelector","uploadAvatarInput","userId","localStorage","getItem","getUser","tempAvatar","onSubmit","f","uploadFile","then","value","displayName","user","subscribe","hideUpdateUser","tmpData","tempAvatarFName","_id","post","res","err","window","location","reload","classList","remove","add","uploadAvatar","click","id","formData","FormData","append","loc","ɵfac","UpdateUserComponent_Factory","t","ɵɵdirectiveInject","ElementRef","UserService","HttpClient","Router","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","UpdateUserComponent_Query","rf","ctx","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","div","first","input","imageCropper","inputs","decls","vars","consts","template","UpdateUserComponent_Template","_r1","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","UpdateUserComponent_Template_form_ngSubmit_2_listener","ɵɵrestoreView","_r0","ɵɵreference","UpdateUserComponent_Template_span_click_4_listener","ɵɵtext","ɵɵelementEnd","UpdateUserComponent_Template_image_cropper_imageCropped_9_listener","$event","UpdateUserComponent_Template_image_cropper_imageLoaded_9_listener","UpdateUserComponent_Template_image_cropper_cropperReady_9_listener","UpdateUserComponent_Template_image_cropper_loadImageFailed_9_listener","UpdateUserComponent_Template_input_change_10_listener","UpdateUserComponent_Template_div_click_12_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵpropertyInterpolate1","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"mappings":"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","sourcesContent":["//import { ImageCroppedEvent, LoadedImage } from 'ngx-image-cropper'; //testing\nimport { ImageCropperComponent } from 'ngx-image-cropper'; //testing\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/user.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"ngx-image-cropper\";\nconst _c0 = [\"updateUser\"];\nconst _c1 = [\"avatarUpload\"];\nexport class UpdateUserComponent {\n    constructor(el, userService, http, router) {\n        this.el = el;\n        this.userService = userService;\n        this.http = http;\n        this.router = router;\n        this.fileName = \"\";\n        this.updateUser = false;\n        this.avatarUpdated = false;\n        this.showSpinner = false;\n        //testing\n        this.imageChangedEvent = '';\n        this.croppedImage = '';\n    }\n    imageLoaded() {\n        console.log(\"image loaded\");\n    }\n    cropperReady() {\n        console.log(\"cropper ready\");\n    }\n    loadImageFailed() {\n        console.log(\"loadImageFailed\");\n    }\n    fileChangeEvent(event) {\n        this.imageChangedEvent = event;\n    }\n    imageCropped(event) {\n        this.croppedImage = event.base64;\n        //console.log(this.croppedImage.substring(22,this.croppedImage.length));\n        const byteCharacters = atob(this.croppedImage.substring(22, this.croppedImage.length));\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n            byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        this.croppedAvatarBlob = new Blob([byteArray], { type: 'image/png' });\n    }\n    //testing\n    ngOnInit() {\n        this.updateUserDiv = this.el.nativeElement.querySelector(\"#updateUser\");\n        this.uploadAvatarInput = this.el.nativeElement.querySelector(\"#avatarUpload\");\n        let userId = localStorage.getItem(\"userId\");\n        if (userId) {\n            this.getUser(userId);\n        }\n        this.tempAvatar = `assets/avatars/${userId}/avatar.png`;\n    }\n    async onSubmit(f) {\n        console.log(\"f submit running\");\n        await this.uploadFile()\n            .then(() => {\n            console.log(\"after uploadFile then in onSubmit\");\n            if (f.value.displayName != \"\" || this.avatarUpdated) {\n                if (f.value.displayName != \"\") {\n                    this.user.displayName = f.value.displayName;\n                }\n                this.userService.updateUser(this.user)\n                    .subscribe((user) => {\n                    console.log(\"user updated, hideUpdateUser\");\n                    this.user = user;\n                    this.hideUpdateUser();\n                    if (this.avatarUpdated) {\n                        this.avatarUpdated = false;\n                        let tmpData = {\n                            \"newAvatarLoc\": this.tempAvatarFName,\n                            \"_id\": this.user._id\n                        };\n                        this.http.post(\"https://smokingmonkey.club:3978/updateAvatar\", tmpData)\n                            .subscribe(res => console.log(res), err => console.log(err));\n                    }\n                    console.log(\"reload\");\n                    window.location.reload();\n                });\n                //trap error\n            }\n        });\n    }\n    hideUpdateUser() {\n        //this.showSpinner=false;\n        this.tempAvatar = `assets/avatars/${this.user._id}/avatar.png`;\n        this.updateUserDiv.classList.remove(\"w3-show\");\n        this.updateUserDiv.classList.add(\"w3-hide\");\n    }\n    /*\n    const myAsynFunction = async (url: string): Promise<T> => {\n        const { data } = await fetch(url)\n        return data\n    }\n    */\n    uploadAvatar() {\n        //console.log(\"clicked\");\n        //this.showSpinner=true;\n        //console.log(\"showing spinner\");\n        this.uploadAvatarInput.click();\n    }\n    getUser(id) {\n        this.userService.getUser(id)\n            .subscribe((user) => {\n            this.user = user;\n            console.log(\"got user \", this.user);\n        });\n    }\n    async uploadFile() {\n        let formData = new FormData();\n        formData.append('avatarUpload', this.croppedAvatarBlob, \"upload.png\");\n        this.http.post(\"https://smokingmonkey.club:3978/uploadFile\", formData)\n            .subscribe(res => {\n            console.log(\"new avatar uploaded \", res);\n            this.tempAvatar = `assets/avatars/${res.loc}/`;\n            this.avatarUpdated = true;\n            this.tempAvatarFName = res.loc;\n            /*\n            setTimeout(() => {\n    \n              //console.log(\"hiding spinner\");\n              //this.showSpinner=false;\n            }, 1000);\n            */\n        }, err => console.log(err));\n    }\n}\nUpdateUserComponent.ɵfac = function UpdateUserComponent_Factory(t) { return new (t || UpdateUserComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router)); };\nUpdateUserComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: UpdateUserComponent, selectors: [[\"app-update-user\"]], viewQuery: function UpdateUserComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(ImageCropperComponent, 5);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.div = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.input = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imageCropper = _t.first);\n    } }, inputs: { updateUser: \"updateUser\" }, decls: 21, vars: 7, consts: [[\"id\", \"updateUser\", 1, \"w3-modal\"], [1, \"w3-col\", \"l4\", \"m8\", \"w3-container\", \"w3-display-topmiddle\"], [1, \"w3-container\", \"w3-card-4\", \"w3-light-grey\", \"w3-text-blue\", \"w3-margin\", \"w3-round-large\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"w3-btn\", \"w3-right\", 2, \"padding-top\", \"3px\", \"padding-bottom\", \"3px\", \"padding-left\", \"8px\", \"padding-right\", \"0px\", 3, \"click\"], [1, \"w3-row\", \"w3-section\"], [1, \"w3-rest\", \"w3-center\"], [1, \"w3-container\", \"w3-display-container\", \"w3-text-white\"], [\"format\", \"png\", 3, \"imageChangedEvent\", \"maintainAspectRatio\", \"aspectRatio\", \"resizeToWidth\", \"imageURL\", \"hidden\", \"imageCropped\", \"imageLoaded\", \"cropperReady\", \"loadImageFailed\"], [\"type\", \"file\", \"id\", \"avatarUpload\", \"name\", \"avatarUpload\", 2, \"display\", \"none\", 3, \"change\"], [\"onmouseover\", \"\", 1, \"w3-container\", \"w3-text-theme\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"w3-row\", \"w3-section\", \"w3-padding\"], [1, \"w3-col\", 2, \"width\", \"50px\"], [1, \"w3-xxlarge\", \"fa\", \"fa-user\", \"w3-text-theme\"], [1, \"w3-rest\"], [\"name\", \"displayName\", \"type\", \"text\", \"ngModel\", \"\", 1, \"w3-input\", \"w3-border\", 3, \"placeholder\"], [\"type\", \"submit\", 1, \"w3-button\", \"w3-block\", \"w3-section\", \"w3-button\", \"w3-theme\", \"w3-ripple\", \"w3-padding\"]], template: function UpdateUserComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function UpdateUserComponent_Template_form_ngSubmit_2_listener() { i0.ɵɵrestoreView(_r1); const _r0 = i0.ɵɵreference(3); return ctx.onSubmit(_r0); });\n        i0.ɵɵelementStart(4, \"span\", 4);\n        i0.ɵɵlistener(\"click\", function UpdateUserComponent_Template_span_click_4_listener() { return ctx.hideUpdateUser(); });\n        i0.ɵɵtext(5, \"\\u2716\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"image-cropper\", 8);\n        i0.ɵɵlistener(\"imageCropped\", function UpdateUserComponent_Template_image_cropper_imageCropped_9_listener($event) { return ctx.imageCropped($event); })(\"imageLoaded\", function UpdateUserComponent_Template_image_cropper_imageLoaded_9_listener() { return ctx.imageLoaded(); })(\"cropperReady\", function UpdateUserComponent_Template_image_cropper_cropperReady_9_listener() { return ctx.cropperReady(); })(\"loadImageFailed\", function UpdateUserComponent_Template_image_cropper_loadImageFailed_9_listener() { return ctx.loadImageFailed(); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"input\", 9);\n        i0.ɵɵlistener(\"change\", function UpdateUserComponent_Template_input_change_10_listener($event) { return ctx.fileChangeEvent($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5);\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵlistener(\"click\", function UpdateUserComponent_Template_div_click_12_listener() { return ctx.uploadAvatar(); });\n        i0.ɵɵtext(13, \"Click to change\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelementStart(15, \"div\", 12);\n        i0.ɵɵelement(16, \"i\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 14);\n        i0.ɵɵelement(18, \"input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"button\", 16);\n        i0.ɵɵtext(20, \"Update Profile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"imageChangedEvent\", ctx.imageChangedEvent)(\"maintainAspectRatio\", true)(\"aspectRatio\", 1 / 1)(\"resizeToWidth\", 128)(\"imageURL\", ctx.tempAvatar)(\"hidden\", true);\n        i0.ɵɵadvance(9);\n        i0.ɵɵpropertyInterpolate1(\"placeholder\", \"\", ctx.user && ctx.user.displayName, \" (display name)\");\n    } }, directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.ImageCropperComponent, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGRhdGUtdXNlci5jb21wb25lbnQuY3NzIn0= */\"] });\n"]},"metadata":{},"sourceType":"module"}